(function(){window.$mcSite||($mcSite={optinFeatures:[],enableOptIn:function(){this.createCookie("mc_user_optin",!0,365);this.optinFeatures.forEach(function(b){b()})},runIfOptedIn:function(b){this.hasOptedIn()?b():this.optinFeatures.push(b)},hasOptedIn:function(){var b=this.readCookie("mc_user_optin");return void 0===b?!0:"true"===b},createCookie:function(b,d,f){d=encodeURIComponent(d)+";";if(void 0===f)throw Error("expirationDays is not defined");if(null!==f){var a=new Date;a.setDate(a.getDate()+
f);d+=" expires="+a.toUTCString()+";"}document.cookie=b+"="+(d+"path=/")},readCookie:function(b){b+="=";for(var d=document.cookie.split(";"),f=0;f<d.length;f++){for(var a=d[f];" "===a.charAt(0);)a=a.substring(1,a.length);if(0===a.indexOf(b))return a.substring(b.length,a.length)}}});$mcSite.shopify_attribution_cookie={settings:{}}})();
(function(){var b={processParameters:function(){var a=this.getParameter("utm_campaign"),c=this.getParameter("utm_source"),g=this.getParameter("utm_medium"),e=this.getParameter("gclid"),b=this.getParameter("mc_cid");this.isValidUTMCampaign(a)&&this.isValidUTMSource(c)&&this.isValidUTMMedium(g)?this.storeEngagement(a,c,g,e,365):this.isValidMCCID(b)&&this.storeMCCIDEngagement(b,365)},engagementToAttribs:function(a){return{utm_campaign:a.id,utm_source:a.src,utm_medium:a.medium,created_at:a.created_at,
gclid:a.gclid,mc_cid:a.mccid}},injectCartAttributes:function(a,c){c=this.engagementToAttribs(c);var g=this.createAttributeParagraphElement(),b;for(b in c)if(c.hasOwnProperty(b)){var d=this.createAttributeInputField(b,c[b]);g.appendChild(d)}a.appendChild(g)},isDoNotTrack:function(){return"1"===navigator.doNotTrack||"1"===navigator.msDoNotTrack?!0:!1},getUnixTimestamp:function(){return Math.round((new Date).getTime()/1E3)},getParameter:function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?&]"+
a+"=([^&#]*)")).exec(location.search);return null===a?null:decodeURIComponent(a[1].replace(/\+/g," "))},isValidUTMCampaign:function(a){return a?-1===a.search(/^[a-zA-Z0-9]{10,12}$/)?!1:!0:!1},isValidUTMSource:function(a){return a?-1===a.search(/^mailchimp$/i)?!1:!0:!1},isValidUTMMedium:function(a){return a?-1===a.search(/^(campaign|ad)$/i)?!1:!0:!1},isValidMCCID:function(a){return a?-1===a.search(/^[a-zA-Z0-9]{10,12}$/)?!1:!0:!1},getEngagements:function(){var a=this.readCookie("mc_track");a=JSON.parse(decodeURIComponent(a));
return null!==a?a:[]},getEngagementsSortedByCreatedAt:function(){return this.getEngagements().sort(function(a,c){return c.created_at-a.created_at})},getMostRecentEngagement:function(){var a=this.getEngagementsSortedByCreatedAt();return 0<a.length?a[0]:null},hasStoredEngagement:function(a){return 0===this.getEngagements().filter(function(c){return c.id===a}).length?!1:!0},hasStoredMCCIDEngagement:function(a){return 0===this.getEngagements().filter(function(c){return c.mccid&&c.mccid===a}).length?!1:
!0},storeEngagement:function(a,c,g,b,d){if(!this.hasStoredEngagement(a)){var e=this.getEngagements();a=this.generateEngagementObject(a,c,g,b,null);e.push(a);var f=this.getUnixTimestamp()-5184E3;e=e.filter(function(a){return a.created_at>f});this.createCookie("mc_track",JSON.stringify(e),d)}},storeMCCIDEngagement:function(a,c){if(!this.hasStoredMCCIDEngagement(a)){var b=this.getEngagements();a=this.generateEngagementObject(null,null,null,null,a);b.push(a);var e=this.getUnixTimestamp()-5184E3;b=b.filter(function(a){return a.created_at>
e});this.createCookie("mc_track",JSON.stringify(b),c)}},generateEngagementObject:function(a,c,b,e,d){return{id:a,src:c,medium:b,gclid:e,mccid:d,created_at:this.getUnixTimestamp()}},createCookie:function(a,c,b){c=encodeURIComponent(c)+";";if(null!==b){var e=new Date;e.setDate(e.getDate()+b);c+=" expires="+e.toUTCString()+";"}document.cookie=a+"="+(c+"path=/")},readCookie:function(a){a+="=";for(var b=document.cookie.split(";"),d=0;d<b.length;d++){for(var e=b[d];" "===e.charAt(0);)e=e.substring(1,e.length);
if(0===e.indexOf(a))return e.substring(a.length,e.length)}return null},getCartForm:function(){return document.querySelector("form[action='/cart']")},createAttributeInputField:function(a,b){var c=document.createElement("input");c.type="hidden";c.name="attributes["+a+"]";c.value=b;return c},createAttributeParagraphElement:function(){var a=document.createElement("p");a.setAttribute("class","cart-attribute__field");return a},postCartAttributes:function(a){a=this.engagementToAttribs(a);try{var b=new XMLHttpRequest;
b.open("POST","/cart/update.js",!0);b.setRequestHeader("Content-Type","application/json");b.send(JSON.stringify({attributes:a}))}catch(g){console.warn("Unable to set attribution params in Shopify: "+g.message)}},updateCustomerSession:function(){var a=this.readCookie("mc_customer_session_id");if(a){a={attributes:{customer_session_id:a}};try{var b=new XMLHttpRequest;b.open("POST","/cart/update.js",!0);b.setRequestHeader("Content-Type","application/json");b.send(JSON.stringify(a))}catch(g){console.warn("Unable to set attribution params in Shopify: "+
g.message)}}}};if(void 0!==window.$mcSite&&void 0!==window.$mcSite.shopify_attribution_cookie){var d=window.$mcSite.shopify_attribution_cookie;if(!0!==d.installed&&(d.installed=!0,!b.isDoNotTrack()&&(b.processParameters(),setTimeout(function(){b.updateCustomerSession()},3E3),d=b.getMostRecentEngagement(),null!==d&&void 0!==d))){var f=b.getCartForm();null===f?b.postCartAttributes(d):b.injectCartAttributes(f,d)}}})();
